<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">

	<title>lofty 前端基础框架</title>
	<!-- Demo页面自身所需的基本样式，全局Reset文件在demo-mobile.min.css中引入 --->
	<link href="http://loftyjs.com/fdevlib/static/css/lofty/demo-mobile.min.css" rel="stylesheet" />
		
	<script src="http://style.c.aliimg.com/m/lofty/port/lofty.js"></script>
	<script src="http://style.c.aliimg.com/m/lofty/gallery/appframework/af.js"></script>
	<style>
		.demo-widget-dom a{
			margin-right:30px;
			padding:10px 0; 
		}
		
		.demo-widget-dom p{
			padding:15px 0; 
		}
	</style>
</head>

<body>

<div class="demo-content">
	<div class="demo-widget">
		<div class="demo-widget-dom">
		
	<a href="#help">路由规则1</a>
		
	<a href="#search/pages/9">路由规则2</a><br/>
	
	<p>路由回调值：<b style="color:red" id="routerVal"></b></p>
	
	<p>请在新窗口中打开 Demo 观察 URL 变化</p>
	
			
	<script type="text/javascript">
		define(['jquery', 'util/router/1.0',"util/history/1.0"], function($, Router, History){

			// Instantiate the router
			var appRouter = new Router({
			
			    routes:{
			　　　　"search/:query/:page":"searchCallback"
			　　},
				
			   //初始化时可以先不启动 history
			    history:false,
			
			   //该回调函数将被动态路由规则所覆盖
			    searchCallback:function(query,page) {
				  $('#routerVal').html(page + " rewrited");
			　　}
			});
			
			appRouter.route("help",'help', function(){
			  $('#routerVal').html("helpCallback");
			});
			
			appRouter.route("search/:query/:page",'page', function(query,page){
			   $('#routerVal').html(page);
			});
			
		    //规则配置完毕后再启用 history
			History.start();
			
		});
	</script>
		
		</div>		
	</div>	
</div>

<!-- Demo页面自身所需的JS，实际项目中无需引入 --->
<script src="http://loftyjs.com/fdevlib/static/js/lofty/demo.min.js" type="text/javascript"></script>	
</body>
</html>